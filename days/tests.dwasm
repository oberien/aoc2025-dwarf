#var tests {
    call test_string_from_number
    call test_string_slice
    call test_string_split_at
    call test_string_repeat
    call test_bytearray_index_of
    #debug
    constu 1
}

#proc test_string_from_number {
    constu 1
    call string_from_number
    #create $String { len: 1, data: [0; 254] }
    #set $String.data[0] = 0x31
    #if (dup) != (pick 2) {
        constu 8907431894709842397
        call panic
    }
    drop
    drop

    constu 421337
    call string_from_number
    #create $String { len: 6, data: [0; 254] }
    #set $String.data[0] = 0x34
    #set $String.data[1] = 0x32
    #set $String.data[2] = 0x31
    #set $String.data[3] = 0x33
    #set $String.data[4] = 0x33
    #set $String.data[5] = 0x37
    #if (dup) != (pick 2) {
        constu 4896515384654835
        call panic
    }
    drop
    drop
}

#proc test_string_slice {
    #create $String { len: 6, data: [0; 254] }
    #set $String.data[0] = 0x34
    #set $String.data[1] = 0x32
    #set $String.data[2] = 0x31
    #set $String.data[3] = 0x33
    #set $String.data[4] = 0x33
    #set $String.data[5] = 0x37

    dup
    constu 0
    constu 3
    call string_slice
    #create $String { len: 3, data: [0; 254] }
    #set $String.data[0] = 0x34
    #set $String.data[1] = 0x32
    #set $String.data[2] = 0x31
    #if (dup) != (pick 2) {
        constu 41683546574532
        call panic
    }
    drop
    drop

    dup
    constu 3
    constu 6
    call string_slice
    #create $String { len: 3, data: [0; 254] }
    #set $String.data[0] = 0x33
    #set $String.data[1] = 0x33
    #set $String.data[2] = 0x37
    #if (dup) != (pick 2) {
        constu 20938450791982
        call panic
    }
    drop
    drop

    dup
    constu 2
    constu 4
    call string_slice
    #create $String { len: 2, data: [0; 254] }
    #set $String.data[0] = 0x31
    #set $String.data[1] = 0x33
    #if (dup) != (pick 2) {
        constu 375489615334
        call panic
    }
    drop
    drop

    drop
}

#proc test_string_split_at {
    #create $String { len: 6, data: [0; 254] }
    #set $String.data[0] = 0x34
    #set $String.data[1] = 0x32
    #set $String.data[2] = 0x31
    #set $String.data[3] = 0x33
    #set $String.data[4] = 0x33
    #set $String.data[5] = 0x37

    dup
    constu 3
    call string_split_at
    #create $String { len: 3, data: [0; 254] }
    #set $String.data[0] = 0x33
    #set $String.data[1] = 0x33
    #set $String.data[2] = 0x37
    #if (dup) != (pick 2) {
        constu 485612348988
        call panic
    }
    drop
    drop
    #create $String { len: 3, data: [0; 254] }
    #set $String.data[0] = 0x34
    #set $String.data[1] = 0x32
    #set $String.data[2] = 0x31
    #if (dup) != (pick 2) {
        constu 1098724309
        call panic
    }
    drop
    drop

    dup
    constu 1
    call string_split_at
    #create $String { len: 5, data: [0; 254] }
    #set $String.data[0] = 0x32
    #set $String.data[1] = 0x31
    #set $String.data[2] = 0x33
    #set $String.data[3] = 0x33
    #set $String.data[4] = 0x37
    #if (dup) != (pick 2) {
        constu 56483128648645
        call panic
    }
    drop
    drop
    #create $String { len: 1, data: [0; 254] }
    #set $String.data[0] = 0x34
    #if (dup) != (pick 2) {
        constu 784655123459
        call panic
    }
    drop
    drop

    drop
}

#proc test_string_repeat {
    #create $String { len: 2, data: [0; 254] }
    #set $String.data[0] = 0x34
    #set $String.data[1] = 0x32

    dup
    constu 3
    call string_repeat
    #create $String { len: 6, data: [0; 254] }
    #set $String.data[0] = 0x34
    #set $String.data[1] = 0x32
    #set $String.data[2] = 0x34
    #set $String.data[3] = 0x32
    #set $String.data[4] = 0x34
    #set $String.data[5] = 0x32
    #if (dup) != (pick 2) {
        constu 784681538
        call panic
    }
    drop
    drop

    drop
}

#proc test_bytearray_index_of {
    #create $Bytearray { len: 6, data: [0; 254] }
    #set $String.data[0] = 1
    #set $String.data[1] = 1
    #set $String.data[2] = 2
    #set $String.data[3] = 4
    #set $String.data[4] = 8
    #set $String.data[5] = 16

    dup
    constu 1
    call bytearray_index_of
    #if (dup) != (constu 0) {
        constu 48961532454638
        call panic
    }
    drop
    drop

    dup
    constu 2
    call bytearray_index_of
    #if (dup) != (constu 2) {
        constu 4861543245498
        call panic
    }
    drop
    drop

    dup
    constu 4
    call bytearray_index_of
    #if (dup) != (constu 3) {
        constu 189263498710982
        call panic
    }
    drop
    drop

    dup
    constu 8
    call bytearray_index_of
    #if (dup) != (constu 4) {
        constu 678913132578
        call panic
    }
    drop
    drop

    dup
    constu 16
    call bytearray_index_of
    #if (dup) != (constu 5) {
        constu 89712639784071982
        call panic
    }
    drop
    drop

    dup
    constu 3
    call bytearray_index_of
    #if (dup) != (consts -1) {
        constu 981293787473120
        call panic
    }
    drop
    drop

    drop
}
